var a=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var f=a((de,g)=>{var h=class{constructor(e){if(!e)return this;this.$module=e,this.debounceFormSubmitTimer=null,this.$module.addEventListener("keydown",this.handleKeyDown.bind(this)),this.$module.addEventListener("click",this.debounce.bind(this))}handleKeyDown(e){let{target:t}=e;t.getAttribute("role")==="button"&&e.keyCode===32&&(e.preventDefault(),t.click())}debounce(e){let{target:t}=e;if(t.getAttribute("data-prevent-double-click")==="true"){if(this.debounceFormSubmitTimer)return e.preventDefault(),!1;this.debounceFormSubmitTimer=setTimeout(()=>{this.debounceFormSubmitTimer=null},1*1e3)}}};g.exports=({scope:i=document}={})=>{i.querySelectorAll('[data-module="ndrsuk-button"]').forEach(t=>{new h(t)})}});var v=a((ce,p)=>{var d=class i{constructor(e){if(!e)return this;let t=e.querySelector(".ndrsuk-js-character-count");if(!t)return this;this.$module=e,this.$textarea=t,this.$visibleCountMessage=null,this.$screenReaderCountMessage=null,this.lastInputTimestamp=null;let s=document.getElementById(`${this.$textarea.id}-info`);this.$textarea.insertAdjacentElement("afterend",s);let n=document.createElement("div");n.className="ndrsuk-character-count__sr-status ndrsuk-u-visually-hidden",n.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=n,s.insertAdjacentElement("afterend",n);let r=document.createElement("div");r.className=s.className,r.classList.add("ndrsuk-character-count__status"),r.setAttribute("aria-hidden","true"),this.$visibleCountMessage=r,s.insertAdjacentElement("afterend",r),s.classList.add("ndrsuk-u-visually-hidden"),this.options=i.getDataset(this.$module);let o=this.defaults.characterCountAttribute;this.options.maxwords&&(o=this.defaults.wordCountAttribute),this.maxLength=this.$module.getAttribute(o),this.maxLength&&(this.$textarea.removeAttribute("maxlength"),this.bindChangeEvents(),"onpageshow"in window?window.addEventListener("pageshow",this.updateCountMessage.bind(this)):window.addEventListener("DOMContentLoaded",this.updateCountMessage.bind(this)),this.updateCountMessage())}static getDataset(e){let t={},{attributes:s}=e;if(s)for(let n=0;n<s.length;n++){let r=s[n],o=r.name.match(/^data-(.+)/);o&&(t[o[1]]=r.value)}return t}count(e){let t;return this.options.maxwords?t=(e.match(/\S+/g)||[]).length:t=e.length,t}bindChangeEvents(){let{$textarea:e}=this;e.addEventListener("keyup",this.handleKeyUp.bind(this)),e.addEventListener("focus",this.handleFocus.bind(this)),e.addEventListener("blur",this.handleBlur.bind(this))}checkIfValueChanged(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())}updateCountMessage(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()}updateVisibleCountMessage(){let{$textarea:e}=this,{$visibleCountMessage:t}=this,s=this.maxLength-this.count(e.value);this.isOverThreshold()?t.classList.remove("ndrsuk-character-count__message--disabled"):t.classList.add("ndrsuk-character-count__message--disabled"),s<0?(e.classList.add("ndrsuk-textarea--error"),t.classList.remove("ndrsuk-hint"),t.classList.add("ndrsuk-error-message")):(e.classList.remove("ndrsuk-textarea--error"),t.classList.remove("ndrsuk-error-message"),t.classList.add("ndrsuk-hint")),t.innerHTML=this.formattedUpdateMessage()}updateScreenReaderCountMessage(){let{$screenReaderCountMessage:e}=this;this.isOverThreshold()?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",!0),e.innerHTML=this.formattedUpdateMessage()}formattedUpdateMessage(){let{$textarea:e}=this,{options:t}=this,s=this.maxLength-this.count(e.value),n="remaining",r="character",o=s;return t.maxwords&&(r="word"),r+=s===-1||s===1?"":"s",n=s<0?"too many":"remaining",o=Math.abs(s),`You have ${o} ${r} ${n}`}isOverThreshold(){let{$textarea:e}=this,{options:t}=this,s=this.count(e.value),{maxLength:n}=this,r=t.threshold?t.threshold:0;return n*r/100<=s}handleKeyUp(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()}handleFocus(){this.valueChecker=setInterval(()=>{(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.checkIfValueChanged()},1e3)}handleBlur(){clearInterval(this.valueChecker)}};d.prototype.defaults={characterCountAttribute:"data-maxlength",wordCountAttribute:"data-maxwords"};p.exports=({scope:i=document}={})=>{i.querySelectorAll('[data-module="ndrsuk-character-count"]').forEach(t=>{new d(t)})}});var u=a((he,k)=>{var z=(i,e)=>{if(!i||!e)return;let t=i.getAttribute(e)==="true"?"false":"true";i.setAttribute(e,t)},J=(i,e)=>{if(!i||!e)return;let t=i.getAttribute("aria-controls");if(t){let s=document.getElementById(t);s&&(i.checked?(s.classList.remove(e),i.setAttribute("aria-expanded","true")):(s.classList.add(e),i.setAttribute("aria-expanded","false")))}};function Q(){let i=new Date().getTime();return typeof window.performance<"u"&&typeof window.performance.now=="function"&&(i+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(e==="x"?t:t&3|8).toString(16)})}function X(i,e={}){let t=i.getAttribute("tabindex");t||i.setAttribute("tabindex","-1");function s(){i.removeEventListener("focus",s),i.addEventListener("blur",n)}function n(){i.removeEventListener("blur",n),e.onBlur&&e.onBlur.call(i),t||i.removeAttribute("tabindex")}i.addEventListener("focus",s),e.onBeforeFocus&&e.onBeforeFocus.call(i),i.focus()}k.exports={toggleAttribute:z,toggleConditionalInput:J,generateUniqueID:Q,setFocus:X}});var y=a((be,x)=>{var{toggleConditionalInput:E}=u(),l=function(e){e.form.querySelectorAll('input[type="checkbox"]').forEach(s=>E(s,"ndrsuk-checkboxes__conditional--hidden"))},Z=function(e){e.form.querySelectorAll(`input[type="checkbox"][data-checkbox-exclusive-group="${e.getAttribute("data-checkbox-exclusive-group")}"]`).forEach(s=>{e.form===s.form&&s!==e&&(s.checked=!1)}),l(e)},ee=function(e){e.form.querySelectorAll(`input[type="checkbox"][data-checkbox-exclusive][data-checkbox-exclusive-group="${e.getAttribute("data-checkbox-exclusive-group")}"]`).forEach(s=>{e.form===s.form&&(s.checked=!1)}),l(e)};x.exports=({scope:i=document}={})=>{let e=i.querySelectorAll(".ndrsuk-checkboxes .ndrsuk-checkboxes__input"),t=s=>{E(s.target,"ndrsuk-checkboxes__conditional--hidden"),s.target.checked&&(s.target.hasAttribute("data-checkbox-exclusive")?Z(s.target):ee(s.target))};"onpageshow"in window?window.addEventListener("pageshow",()=>e.forEach(s=>l(s))):window.addEventListener("DOMContentLoaded",()=>e.forEach(s=>l(s))),e.forEach(s=>l(s)),e.forEach(s=>{s.addEventListener("change",t)})}});var M=a((me,A)=>{var{generateUniqueID:te,toggleAttribute:w}=u();A.exports=({scope:i=document}={})=>{let e=i.querySelectorAll("details"),t=s=>{s.setAttribute("ndrsuk-polyfilled","true");let n=s.querySelector(".ndrsuk-details__text");n.id||n.setAttribute("id",`details-content-${te()}`);let r=s.querySelector(".ndrsuk-details__summary");r.setAttribute("role","button"),r.setAttribute("aria-controls",n.id),r.setAttribute("tabIndex","0"),s.getAttribute("open")!==null===!0?(r.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false")):(r.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),n.style.display="none");let W=()=>{w(r,"aria-expanded"),w(n,"aria-hidden"),n.style.display=n.getAttribute("aria-hidden")==="true"?"none":"",s.hasAttribute("open")?s.removeAttribute("open"):s.setAttribute("open","open")};r.addEventListener("click",W),r.addEventListener("keydown",c=>{(c.keyCode===13||c.keyCode===32)&&(c.preventDefault(),r.click())})};e.forEach(s=>{!("HTMLDetailsElement"in window&&s instanceof HTMLDetailsElement)&&!s.hasAttribute("ndrsuk-polyfilled")&&t(s)})}});var C=a((ge,L)=>{function se(i){let e=i.closest("fieldset");if(e){let t=e.getElementsByTagName("legend");if(t.length){let s=t[0];if(i.type==="checkbox"||i.type==="radio")return s;let n=s.getBoundingClientRect().top,r=i.getBoundingClientRect();if(r.height&&window.innerHeight&&r.top+r.height-n<window.innerHeight/2)return s}}return document.querySelector(`label[for='${i.getAttribute("id")}']`)||i.closest("label")}function ie(i){if(i.tagName!=="A"||i.href===!1)return!1;let e=document.querySelector(i.hash);if(!e)return!1;let t=se(e);return t?(t.scrollIntoView(),e.focus({preventScroll:!0}),!0):!1}function ne(i){ie(i.target)&&i.preventDefault()}L.exports=({focusOnPageLoad:i=!0,scope:e=document}={})=>{let t=e.querySelector(".ndrsuk-error-summary");t&&(i&&t.focus(),t.addEventListener("click",ne))}});var _=a((fe,T)=>{var b=class{constructor(e){if(!e)return this;if(this.$module=e,this.navigationList=this.$module.querySelector(".ndrsuk-header__navigation-list"),this.navigationItems=this.$module.querySelectorAll(".ndrsuk-header__navigation-item"),this.mobileMenuToggleButton=this.$module.querySelector(".ndrsuk-header__menu-toggle"),this.mobileMenuContainer=this.$module.querySelector(".ndrsuk-mobile-menu-container"),!this.navigationList||!this.navigationItems||!this.navigationItems.length||!this.mobileMenuToggleButton||!this.mobileMenuContainer)return this;this.mobileMenu=document.createElement("ul"),this.menuIsEnabled=!1,this.menuIsOpen=!1,this.handleEscapeKey=this.onEscapeKey.bind(this),this.handleUpdateNavigation=this.debounce(this.updateNavigation),this.handleToggleMobileMenu=this.toggleMobileMenu.bind(this),this.setupNavigation(),this.updateNavigation()}debounce(e,t=100){let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>{e.apply(this,n)},t)}}resetNavigation(){let e=0;this.breakpoints.forEach(t=>{this.navigationList.insertBefore(t.element,this.mobileMenuContainer),e+=t.element.offsetWidth,t.right=e}),this.width=this.navigationList.offsetWidth}setupNavigation(){this.breakpoints=[],this.navigationItems.forEach(e=>{this.breakpoints.push({element:e,right:0})}),window.addEventListener("resize",this.handleUpdateNavigation)}setupMobileMenu(){this.mobileMenu.parentElement||(this.mobileMenuContainer.appendChild(this.mobileMenu),this.mobileMenu.classList.add("ndrsuk-header__drop-down","ndrsuk-header__drop-down--hidden"))}enableMobileMenu(){this.menuIsEnabled||(this.menuIsEnabled=!0,this.mobileMenuToggleButton.classList.add("ndrsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.add("ndrsuk-mobile-menu-container--visible"),this.mobileMenuToggleButton.addEventListener("click",this.handleToggleMobileMenu))}disableMobileMenu(){this.menuIsEnabled&&(this.closeMobileMenu(),this.menuIsEnabled=!1,this.mobileMenuToggleButton.classList.remove("ndrsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.remove("ndrsuk-mobile-menu-container--visible"),this.mobileMenuToggleButton.removeEventListener("click",this.handleToggleMobileMenu))}closeMobileMenu(){!this.menuIsEnabled||!this.menuIsOpen||(this.menuIsOpen=!1,this.mobileMenu.classList.add("ndrsuk-header__drop-down--hidden"),this.$module.style.marginBottom=0,this.mobileMenuToggleButton.setAttribute("aria-expanded","false"),document.removeEventListener("keydown",this.handleEscapeKey))}onEscapeKey(e){e.key==="Escape"&&this.closeMobileMenu()}openMobileMenu(){if(!this.menuIsEnabled||this.menuIsOpen)return;this.menuIsOpen=!0,this.mobileMenu.classList.remove("ndrsuk-header__drop-down--hidden");let e=this.mobileMenu.offsetHeight;this.$module.style.marginBottom=`${e}px`,this.mobileMenuToggleButton.setAttribute("aria-expanded","true"),document.addEventListener("keydown",this.handleEscapeKey)}toggleMobileMenu(){this.menuIsEnabled&&(this.menuIsOpen?this.closeMobileMenu():this.openMobileMenu())}updateNavigation(){if(this.resetNavigation(),!this.breakpoints.filter(t=>t.right>this.width).length){this.disableMobileMenu();return}this.setupMobileMenu(),this.enableMobileMenu(),this.width-=this.mobileMenuContainer.offsetWidth,this.breakpoints.forEach(t=>{t.right>this.width&&this.mobileMenu.insertAdjacentElement("beforeend",t.element)})}};T.exports=(i={})=>{let t=(i.scope||document).querySelector(".ndrsuk-navigation");new b(t)}});var S=a((pe,I)=>{var{toggleConditionalInput:re}=u();I.exports=({scope:i=document}={})=>{let e=i.querySelectorAll(".ndrsuk-radios--conditional .ndrsuk-radios__input"),t=()=>{e.forEach(s=>re(s,"ndrsuk-radios__conditional--hidden"))};"onpageshow"in window?window.addEventListener("pageshow",t):window.addEventListener("DOMContentLoaded",t),t(),e.forEach(s=>{s.addEventListener("change",t)})}});var $=a((ve,q)=>{var{setFocus:oe}=u();q.exports=(i={})=>{let t=(i.scope||document).querySelector(".ndrsuk-skip-link");if(!t||!(t instanceof HTMLAnchorElement))return;let s=t.hash.split("#").pop(),n=s?document.getElementById(s):null;n&&t.addEventListener("click",()=>oe(n,{onBeforeFocus(){n.classList.add("ndrsuk-skip-link-focused-element")},onBlur(){n.classList.remove("ndrsuk-skip-link-focused-element")}}))}});var B=a((ke,D)=>{var m=class i{constructor(e){this.$module=e,this.$tabs=e.querySelectorAll(".ndrsuk-tabs__tab"),this.keys={down:40,left:37,right:39,up:38},this.jsHiddenClass="ndrsuk-tabs__panel--hidden",this.showEvent=new CustomEvent("tab.show"),this.hideEvent=new CustomEvent("tab.hide"),typeof window.matchMedia=="function"?this.setupResponsiveChecks():this.setup()}setupResponsiveChecks(){this.mql=window.matchMedia("(min-width: 641px)"),"addEventListener"in this.mql?this.mql.addEventListener("change",this.checkMode.bind(this)):this.mql.addListener(this.checkMode.bind(this)),this.checkMode()}checkMode(){this.mql.matches?this.setup():this.teardown()}setup(){let{$module:e}=this,{$tabs:t}=this,s=e.querySelector(".ndrsuk-tabs__list"),n=e.querySelectorAll(".ndrsuk-tabs__list-item");if(!t||!s||!n)return;s.setAttribute("role","tablist"),n.forEach(o=>{o.setAttribute("role","presentation")}),t.forEach(o=>{this.setAttributes(o),o.boundTabClick=this.onTabClick.bind(this),o.boundTabKeydown=this.onTabKeydown.bind(this),o.addEventListener("click",o.boundTabClick,!0),o.addEventListener("keydown",o.boundTabKeydown,!0),this.hideTab(o)});let r=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(r),e.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",e.boundOnHashChange,!0)}teardown(){let{$module:e}=this,{$tabs:t}=this,s=e.querySelector(".ndrsuk-tabs__list"),n=e.querySelectorAll(".ndrsuk-tabs__list-item");!t||!s||!n||(s.removeAttribute("role"),n.forEach(r=>{r.removeAttribute("role","presentation")}),t.forEach(r=>{r.removeEventListener("click",r.boundTabClick,!0),r.removeEventListener("keydown",r.boundTabKeydown,!0),this.unsetAttributes(r)}),window.removeEventListener("hashchange",e.boundOnHashChange,!0))}onHashChange(){let{hash:e}=window.location,t=this.getTab(e);if(!t)return;if(this.changingHash){this.changingHash=!1;return}let s=this.getCurrentTab();this.hideTab(s),this.showTab(t),t.focus()}hideTab(e){this.unhighlightTab(e),this.hidePanel(e)}showTab(e){this.highlightTab(e),this.showPanel(e)}getTab(e){return this.$module.querySelector(`.ndrsuk-tabs__tab[href="${e}"]`)}setAttributes(e){let t=i.getHref(e).slice(1);e.setAttribute("id",`tab_${t}`),e.setAttribute("role","tab"),e.setAttribute("aria-controls",t),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");let s=this.getPanel(e);s.setAttribute("role","tabpanel"),s.setAttribute("aria-labelledby",e.id),s.classList.add(this.jsHiddenClass)}unsetAttributes(e){e.removeAttribute("id"),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex");let t=this.getPanel(e);t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("tabindex"),t.classList.remove(this.jsHiddenClass)}onTabClick(e){e.target.classList.contains("ndrsuk-tabs__tab")||(e.stopPropagation(),e.preventDefault()),e.preventDefault();let t=e.target,s=this.getCurrentTab();this.hideTab(s),this.showTab(t),this.createHistoryEntry(t)}createHistoryEntry(e){let t=this.getPanel(e),{id:s}=t;t.id="",this.changingHash=!0,window.location.hash=i.getHref(e).slice(1),t.id=s}onTabKeydown(e){switch(e.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),e.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),e.preventDefault();break;default:}}activateNextTab(){let e=this.getCurrentTab(),t=e.parentNode.nextElementSibling,s;t&&(s=t.querySelector(".ndrsuk-tabs__tab")),s&&(this.hideTab(e),this.showTab(s),s.focus(),this.createHistoryEntry(s))}activatePreviousTab(){let e=this.getCurrentTab(),t=e.parentNode.previousElementSibling,s;t&&(s=t.querySelector(".ndrsuk-tabs__tab")),s&&(this.hideTab(e),this.showTab(s),s.focus(),this.createHistoryEntry(s))}getPanel(e){return this.$module.querySelector(i.getHref(e))}showPanel(e){let t=this.getPanel(e);t.classList.remove(this.jsHiddenClass),t.dispatchEvent(this.showEvent)}hidePanel(e){let t=this.getPanel(e);t.classList.add(this.jsHiddenClass),t.dispatchEvent(this.hideEvent)}unhighlightTab(e){e.setAttribute("aria-selected","false"),e.parentNode.classList.remove("ndrsuk-tabs__list-item--selected"),e.setAttribute("tabindex","-1")}highlightTab(e){e.setAttribute("aria-selected","true"),e.parentNode.classList.add("ndrsuk-tabs__list-item--selected"),e.setAttribute("tabindex","0")}getCurrentTab(){return this.$module.querySelector(".ndrsuk-tabs__list-item--selected .ndrsuk-tabs__tab")}static getHref(e){let t=e.getAttribute("href");return t.slice(t.indexOf("#"),t.length)}};D.exports=({scope:i=document}={})=>{i.querySelectorAll('[data-module="ndrsuk-tabs"]').forEach(t=>{new m(t)})}});var N=a(()=>{NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach);Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value(i){return this.filter(e=>e===i).length>0}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(i){var e=this;do{if(Element.prototype.matches.call(e,i))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});typeof window.CustomEvent!="function"&&(window.CustomEvent=function(i,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(i,e.bubbles,e.cancelable,e.detail),t})});var Y=a((ye,G)=>{var H=f(),O=v(),F=y(),P=M(),K=C(),R=_(),U=S(),V=$(),j=B();N();function ae(i){R({scope:i}),V({scope:i}),H({scope:i}),O({scope:i}),F({scope:i}),P({scope:i}),K({scope:i}),U({scope:i}),j({scope:i})}G.exports={initButton:H,initCharacterCount:O,initCheckboxes:F,initDetails:P,initErrorSummary:K,initHeader:R,initRadios:U,initSkipLink:V,initTabs:j,initAll:ae}});var{initAll:ue}=Y();document.addEventListener("DOMContentLoaded",()=>ue(document));
//# sourceMappingURL=ndrsuk.min.js.map
