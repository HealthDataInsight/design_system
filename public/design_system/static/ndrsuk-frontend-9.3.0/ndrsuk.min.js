var M=Object.defineProperty;var T=(s,e,t)=>e in s?M(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>T(s,typeof e!="symbol"?e+"":e,t);var b=class{constructor(e){c(this,"KEY_SPACE",32);c(this,"DEBOUNCE_TIMEOUT_IN_SECONDS",1);this.$module=e,this.debounceFormSubmitTimer=null}handleKeyDown(e){let{target:t}=e;t.getAttribute("role")==="button"&&e.keyCode===this.KEY_SPACE&&(e.preventDefault(),t.click())}debounce(e){let{target:t}=e;if(t.getAttribute("data-prevent-double-click")==="true"){if(this.debounceFormSubmitTimer)return e.preventDefault(),!1;this.debounceFormSubmitTimer=setTimeout(()=>{this.debounceFormSubmitTimer=null},this.DEBOUNCE_TIMEOUT_IN_SECONDS*1e3)}}init(){this.$module.addEventListener("keydown",this.handleKeyDown.bind(this)),this.$module.addEventListener("click",this.debounce.bind(this))}},g=({scope:s=document}={})=>{s.querySelectorAll('[data-module="ndrsuk-button"]').forEach(t=>{new b(t).init()})};var u=class s{constructor(e){this.$module=e,this.$textarea=e.querySelector(".ndrsuk-js-character-count"),this.$visibleCountMessage=null,this.$screenReaderCountMessage=null,this.lastInputTimestamp=null}init(){if(!this.$textarea)return;let{$module:e}=this,{$textarea:t}=this,i=document.getElementById(`${t.id}-info`);t.insertAdjacentElement("afterend",i);let n=document.createElement("div");n.className="ndrsuk-character-count__sr-status ndrsuk-u-visually-hidden",n.setAttribute("aria-live","polite"),this.$screenReaderCountMessage=n,i.insertAdjacentElement("afterend",n);let o=document.createElement("div");o.className=i.className,o.classList.add("ndrsuk-character-count__status"),o.setAttribute("aria-hidden","true"),this.$visibleCountMessage=o,i.insertAdjacentElement("afterend",o),i.classList.add("ndrsuk-u-visually-hidden"),this.options=s.getDataset(e);let a=this.defaults.characterCountAttribute;this.options.maxwords&&(a=this.defaults.wordCountAttribute),this.maxLength=e.getAttribute(a),this.maxLength&&(t.removeAttribute("maxlength"),this.bindChangeEvents(),"onpageshow"in window?window.addEventListener("pageshow",this.updateCountMessage.bind(this)):window.addEventListener("DOMContentLoaded",this.updateCountMessage.bind(this)),this.updateCountMessage())}static getDataset(e){let t={},{attributes:i}=e;if(i)for(let n=0;n<i.length;n++){let o=i[n],a=o.name.match(/^data-(.+)/);a&&(t[a[1]]=o.value)}return t}count(e){let t;return this.options.maxwords?t=(e.match(/\S+/g)||[]).length:t=e.length,t}bindChangeEvents(){let{$textarea:e}=this;e.addEventListener("keyup",this.handleKeyUp.bind(this)),e.addEventListener("focus",this.handleFocus.bind(this)),e.addEventListener("blur",this.handleBlur.bind(this))}checkIfValueChanged(){this.$textarea.oldValue||(this.$textarea.oldValue=""),this.$textarea.value!==this.$textarea.oldValue&&(this.$textarea.oldValue=this.$textarea.value,this.updateCountMessage())}updateCountMessage(){this.updateVisibleCountMessage(),this.updateScreenReaderCountMessage()}updateVisibleCountMessage(){let{$textarea:e}=this,{$visibleCountMessage:t}=this,i=this.maxLength-this.count(e.value);this.isOverThreshold()?t.classList.remove("ndrsuk-character-count__message--disabled"):t.classList.add("ndrsuk-character-count__message--disabled"),i<0?(e.classList.add("ndrsuk-textarea--error"),t.classList.remove("ndrsuk-hint"),t.classList.add("ndrsuk-error-message")):(e.classList.remove("ndrsuk-textarea--error"),t.classList.remove("ndrsuk-error-message"),t.classList.add("ndrsuk-hint")),t.innerHTML=this.formattedUpdateMessage()}updateScreenReaderCountMessage(){let{$screenReaderCountMessage:e}=this;this.isOverThreshold()?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",!0),e.innerHTML=this.formattedUpdateMessage()}formattedUpdateMessage(){let{$textarea:e}=this,{options:t}=this,i=this.maxLength-this.count(e.value),n="remaining",o="character",a=i;return t.maxwords&&(o="word"),o+=i===-1||i===1?"":"s",n=i<0?"too many":"remaining",a=Math.abs(i),`You have ${a} ${o} ${n}`}isOverThreshold(){let{$textarea:e}=this,{options:t}=this,i=this.count(e.value),{maxLength:n}=this,o=t.threshold?t.threshold:0;return n*o/100<=i}handleKeyUp(){this.updateVisibleCountMessage(),this.lastInputTimestamp=Date.now()}handleFocus(){this.valueChecker=setInterval(()=>{(!this.lastInputTimestamp||Date.now()-500>=this.lastInputTimestamp)&&this.checkIfValueChanged()},1e3)}handleBlur(){clearInterval(this.valueChecker)}};u.prototype.defaults={characterCountAttribute:"data-maxlength",wordCountAttribute:"data-maxwords"};var v=({scope:s=document}={})=>{s.querySelectorAll('[data-module="ndrsuk-character-count"]').forEach(t=>{new u(t).init()})};var m=(s,e)=>{if(!s||!e)return;let t=s.getAttribute(e)==="true"?"false":"true";s.setAttribute(e,t)},l=(s,e)=>{if(!s||!e)return;let t=s.getAttribute("aria-controls");if(t){let i=document.getElementById(t);i&&(s.checked?(i.classList.remove(e),s.setAttribute("aria-expanded",!0)):(i.classList.add(e),s.setAttribute("aria-expanded",!1)))}};var d=function(e){e.form.querySelectorAll('input[type="checkbox"]').forEach(i=>l(i,"ndrsuk-checkboxes__conditional--hidden"))},_=function(e){e.form.querySelectorAll(`input[type="checkbox"][data-checkbox-exclusive-group="${e.getAttribute("data-checkbox-exclusive-group")}"]`).forEach(i=>{e.form===i.form&&i!==e&&(i.checked=!1)}),d(e)},S=function(e){e.form.querySelectorAll(`input[type="checkbox"][data-checkbox-exclusive][data-checkbox-exclusive-group="${e.getAttribute("data-checkbox-exclusive-group")}"]`).forEach(i=>{e.form===i.form&&(i.checked=!1)}),d(e)},k=({scope:s=document}={})=>{let e=s.querySelectorAll(".ndrsuk-checkboxes .ndrsuk-checkboxes__input"),t=i=>{l(i.target,"ndrsuk-checkboxes__conditional--hidden"),i.target.checked&&(i.target.hasAttribute("data-checkbox-exclusive")?_(i.target):S(i.target))};"onpageshow"in window?window.addEventListener("pageshow",()=>e.forEach(i=>d(i))):window.addEventListener("DOMContentLoaded",()=>e.forEach(i=>d(i))),e.forEach(i=>d(i)),e.forEach(i=>{i.addEventListener("change",t)})};var y=({scope:s=document}={})=>{if(typeof document.createElement("details").open=="boolean")return;let t=s.querySelectorAll("details"),i=(n,o)=>{n.setAttribute("ndrsuk-polyfilled","true"),n.id||n.setAttribute("id",`ndrsuk-details${o}`);let a=s.querySelector(`#${n.id} .ndrsuk-details__text`);a.id||a.setAttribute("id",`ndrsuk-details__text${o}`);let r=s.querySelector(`#${n.id} .ndrsuk-details__summary`);r.setAttribute("role","button"),r.setAttribute("aria-controls",a.id),r.setAttribute("tabIndex","0"),n.getAttribute("open")!==null===!0?(r.setAttribute("aria-expanded","true"),a.setAttribute("aria-hidden","false")):(r.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),a.style.display="none");let x=()=>{m(r,"aria-expanded"),m(a,"aria-hidden"),a.style.display=a.getAttribute("aria-hidden")==="true"?"none":"",n.hasAttribute("open")?n.removeAttribute("open"):n.setAttribute("open","open")};r.addEventListener("click",x),r.addEventListener("keydown",h=>{(h.keyCode===13||h.keyCode===32)&&(h.preventDefault(),r.click())})};t.length&&t.forEach((n,o)=>{n.hasAttribute("ndrsuk-polyfilled")||i(n,o)})};function $(s){let e=s.closest("fieldset");if(e){let t=e.getElementsByTagName("legend");if(t.length){let i=t[0];if(s.type==="checkbox"||s.type==="radio")return i;let n=i.getBoundingClientRect().top,o=s.getBoundingClientRect();if(o.height&&window.innerHeight&&o.top+o.height-n<window.innerHeight/2)return i}}return document.querySelector(`label[for='${s.getAttribute("id")}']`)||s.closest("label")}function I(s){if(s.tagName!=="A"||s.href===!1)return!1;let e=document.querySelector(s.hash);if(!e)return!1;let t=$(e);return t?(t.scrollIntoView(),e.focus({preventScroll:!0}),!0):!1}function O(s){I(s.target)&&s.preventDefault()}var E=({focusOnPageLoad:s=!0,scope:e=document}={})=>{let t=e.querySelector(".ndrsuk-error-summary");t&&(s&&t.focus(),t.addEventListener("click",O))};var p=class{constructor(){this.menuIsOpen=!1,this.navigation=document.querySelector(".ndrsuk-navigation"),this.navigationList=document.querySelector(".ndrsuk-header__navigation-list"),this.mobileMenu=document.createElement("ul"),this.mobileMenuToggleButton=document.querySelector(".ndrsuk-header__menu-toggle"),this.mobileMenuCloseButton=document.createElement("button"),this.mobileMenuContainer=document.querySelector(".ndrsuk-mobile-menu-container"),this.breakpoints=[],this.width=document.body.offsetWidth}init(){!this.navigation||!this.navigationList||!this.mobileMenuToggleButton||!this.mobileMenuContainer||(this.setupMobileMenu(),this.calculateBreakpoints(),this.updateNavigation(),this.doOnOrientationChange(),this.handleResize=this.debounce(()=>{this.calculateBreakpoints(),this.updateNavigation()}),this.mobileMenuToggleButton.addEventListener("click",this.toggleMobileMenu.bind(this)),window.addEventListener("resize",this.handleResize),window.addEventListener("orientationchange",this.doOnOrientationChange()))}debounce(e,t=100){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{e.apply(this,n)},t)}}calculateBreakpoints(){let t=window.getComputedStyle(this.navigationList).getPropertyValue("gap"),i=Number(t.replace("px","")),n=0;for(let o=0;o<this.navigationList.children.length;o++)n+=this.navigationList.children[o].offsetWidth+i,this.breakpoints[o]=n}setupMobileMenu(){this.mobileMenuContainer.appendChild(this.mobileMenu),this.mobileMenu.classList.add("ndrsuk-header__drop-down","ndrsuk-header__drop-down--hidden")}closeMobileMenu(){this.menuIsOpen=!1,this.mobileMenu.classList.add("ndrsuk-header__drop-down--hidden"),this.navigation.style.marginBottom=0,this.mobileMenuToggleButton.setAttribute("aria-expanded","false"),this.mobileMenuToggleButton.focus(),this.mobileMenuCloseButton.removeEventListener("click",this.closeMobileMenu.bind(this)),document.removeEventListener("keydown",this.handleEscapeKey.bind(this))}handleEscapeKey(e){e.key==="Escape"&&this.closeMobileMenu()}openMobileMenu(){this.menuIsOpen=!0,this.mobileMenu.classList.remove("ndrsuk-header__drop-down--hidden");let e=this.mobileMenu.offsetHeight;this.navigation.style.marginBottom=`${e}px`,this.mobileMenuToggleButton.setAttribute("aria-expanded","true"),document.addEventListener("keydown",this.handleEscapeKey.bind(this)),this.mobileMenuCloseButton.addEventListener("click",this.closeMobileMenu.bind(this))}toggleMobileMenu(){this.menuIsOpen?this.closeMobileMenu():this.openMobileMenu()}updateNavigation(){let e=this.navigationList.offsetWidth,t=this.navigationList.children.length;if(e<this.breakpoints[t-1]){if(this.mobileMenuToggleButton.classList.add("ndrsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.add("ndrsuk-mobile-menu-container--visible"),t===2)return;for(;e<this.breakpoints[t-1];)this.mobileMenu.insertBefore(this.navigationList.children[t-2],this.mobileMenu.firstChild),t-=1}else if(e>this.breakpoints[t])for(;e>this.breakpoints[t];)this.navigationList.insertBefore(this.mobileMenu.removeChild(this.mobileMenu.firstChild),this.mobileMenuContainer),t+=1;this.mobileMenu.children.length||(this.mobileMenuToggleButton.classList.remove("ndrsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.remove("ndrsuk-mobile-menu-container--visible")),document.body.offsetWidth!==this.width&&this.menuIsOpen&&this.closeMobileMenu()}doOnOrientationChange(){switch(window.orientation){case 90:setTimeout(()=>{this.calculateBreakpoints(),this.updateNavigation()},200);break;default:break}}},w=()=>{new p().init()};var C=({scope:s=document}={})=>{let e=s.querySelectorAll(".ndrsuk-radios--conditional .ndrsuk-radios__input"),t=()=>{e.forEach(i=>l(i,"ndrsuk-radios__conditional--hidden"))};"onpageshow"in window?window.addEventListener("pageshow",t):window.addEventListener("DOMContentLoaded",t),t(),e.forEach(i=>{i.addEventListener("change",t)})};var A=()=>{let s=document.querySelector("h1"),e=document.querySelector(".ndrsuk-skip-link");s&&e&&(()=>{e.addEventListener("click",i=>{i.preventDefault(),s.setAttribute("tabIndex","-1"),s.focus()}),s.addEventListener("blur",i=>{i.preventDefault(),s.removeAttribute("tabIndex")})})()};var f=class s{constructor(e,t,i,n){this.$module=e,this.namespace=t,this.responsive=i,this.historyEnabled=n,this.$tabs=e.querySelectorAll(`.${this.namespace}__tab`),this.keys={down:40,left:37,right:39,up:38},this.jsHiddenClass=`${this.namespace}__panel--hidden`,this.showEvent=new CustomEvent("tab.show"),this.hideEvent=new CustomEvent("tab.hide")}init(){typeof window.matchMedia=="function"&&this.responsive?this.setupResponsiveChecks():this.setup()}setupResponsiveChecks(){this.mql=window.matchMedia("(min-width: 641px)"),this.mql.addEventListener("change",this.checkMode.bind(this)),this.checkMode()}checkMode(){this.mql.matches?this.setup():this.teardown()}setup(){let{$module:e}=this,{$tabs:t}=this,i=e.querySelector(`.${this.namespace}__list`),n=e.querySelectorAll(`.${this.namespace}__list-item`);if(!t||!i||!n)return;i.setAttribute("role","tablist"),n.forEach(a=>{a.setAttribute("role","presentation")}),t.forEach(a=>{this.setAttributes(a),a.boundTabClick=this.onTabClick.bind(this),a.boundTabKeydown=this.onTabKeydown.bind(this),a.addEventListener("click",a.boundTabClick,!0),a.addEventListener("keydown",a.boundTabKeydown,!0),this.hideTab(a)});let o=this.getTab(window.location.hash)||this.$tabs[0];this.showTab(o),this.historyEnabled&&(e.boundOnHashChange=this.onHashChange.bind(this),window.addEventListener("hashchange",e.boundOnHashChange,!0))}teardown(){let{$module:e}=this,{$tabs:t}=this,i=e.querySelector(`.${this.namespace}__list`),n=e.querySelectorAll(`.${this.namespace}__list-item`);!t||!i||!n||(i.removeAttribute("role"),n.forEach(o=>{o.removeAttribute("role","presentation")}),t.forEach(o=>{o.removeEventListener("click",o.boundTabClick,!0),o.removeEventListener("keydown",o.boundTabKeydown,!0),this.unsetAttributes(o)}),this.historyEnabled&&window.removeEventListener("hashchange",e.boundOnHashChange,!0))}onHashChange(){let{hash:e}=window.location,t=this.getTab(e);if(!t)return;if(this.changingHash){this.changingHash=!1;return}let i=this.getCurrentTab();this.hideTab(i),this.showTab(t),t.focus()}hideTab(e){this.unhighlightTab(e),this.hidePanel(e)}showTab(e){this.highlightTab(e),this.showPanel(e)}getTab(e){return this.$module.querySelector(`.${this.namespace}__tab[href="${e}"]`)}setAttributes(e){let t=s.getHref(e).slice(1);e.setAttribute("id",`tab_${t}`),e.setAttribute("role","tab"),e.setAttribute("aria-controls",t),e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1");let i=this.getPanel(e);i.setAttribute("role","tabpanel"),i.setAttribute("aria-labelledby",e.id),i.classList.add(this.jsHiddenClass)}unsetAttributes(e){e.removeAttribute("id"),e.removeAttribute("role"),e.removeAttribute("aria-controls"),e.removeAttribute("aria-selected"),e.removeAttribute("tabindex");let t=this.getPanel(e);t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("tabindex"),t.classList.remove(this.jsHiddenClass)}onTabClick(e){e.target.classList.contains(`${this.namespace}__tab`)||(e.stopPropagation(),e.preventDefault()),e.preventDefault();let t=e.target,i=this.getCurrentTab();this.hideTab(i),this.showTab(t),this.createHistoryEntry(t)}createHistoryEntry(e){if(this.historyEnabled){let t=this.getPanel(e),{id:i}=t;t.id="",this.changingHash=!0,window.location.hash=s.getHref(e).slice(1),t.id=i}}onTabKeydown(e){switch(e.keyCode){case this.keys.left:case this.keys.up:this.activatePreviousTab(),e.preventDefault();break;case this.keys.right:case this.keys.down:this.activateNextTab(),e.preventDefault();break;default:}}activateNextTab(){let e=this.getCurrentTab(),t=e.parentNode.nextElementSibling,i;t&&(i=t.querySelector(`.${this.namespace}__tab`)),i&&(this.hideTab(e),this.showTab(i),i.focus(),this.createHistoryEntry(i))}activatePreviousTab(){let e=this.getCurrentTab(),t=e.parentNode.previousElementSibling,i;t&&(i=t.querySelector(`.${this.namespace}__tab`)),i&&(this.hideTab(e),this.showTab(i),i.focus(),this.createHistoryEntry(i))}getPanel(e){return this.$module.querySelector(s.getHref(e))}showPanel(e){let t=this.getPanel(e);t.classList.remove(this.jsHiddenClass),t.dispatchEvent(this.showEvent)}hidePanel(e){let t=this.getPanel(e);t.classList.add(this.jsHiddenClass),t.dispatchEvent(this.hideEvent)}unhighlightTab(e){e.setAttribute("aria-selected","false"),e.parentNode.classList.remove(`${this.namespace}__list-item--selected`),e.setAttribute("tabindex","-1")}highlightTab(e){e.setAttribute("aria-selected","true"),e.parentNode.classList.add(`${this.namespace}__list-item--selected`),e.setAttribute("tabindex","0")}getCurrentTab(){return this.$module.querySelector(`.${this.namespace}__list-item--selected .${this.namespace}__tab`)}static getHref(e){let t=e.getAttribute("href");return t.slice(t.indexOf("#"),t.length)}},L=({namespace:s="ndrsuk-tabs",responsive:e=!0,historyEnabled:t=!0,scope:i=document}={})=>{i.querySelectorAll(`[data-module="${s}"]`).forEach(o=>{new f(o,s,e,t).init()})};NodeList.prototype.forEach||(NodeList.prototype.forEach=Array.prototype.forEach);Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value(s){return this.filter(e=>e===s).length>0}});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(s){var e=this;do{if(Element.prototype.matches.call(e,s))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null});if(typeof window.CustomEvent!="function"){let s=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i};q=s,window.CustomEvent=s}var q;function B(s){g({scope:s}),v({scope:s}),k({scope:s}),y({scope:s}),E({scope:s}),C({scope:s}),L({scope:s})}document.addEventListener("DOMContentLoaded",()=>{w(),A(),B(document)});export{B as initAll};
//# sourceMappingURL=ndrsuk.min.js.map
